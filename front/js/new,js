  function ajoutProduitLocalStorage(products) {
        
    var articlesLocalStorage = JSON.parse(localStorage.getItem("produits")); // <<< on recupère le localStorage
         
    for(var i = 0; i < articlesLocalStorage.length; i++) { // <<< standard, on boucle dans le localStorage récupéré
      if (articlesLocalStorage[i].idProduit === products.idProduit && articlesLocalStorage[i].colors === products.colors){ // <<< Vérif si article et couleurs existantes 
        let QteArticlesLocalStorage = parseInt(articlesLocalStorage[i].quantite) + parseInt(products.quantite); // <<< Quantité modifiée
        articlesLocalStorage[i].quantite = QteArticlesLocalStorage; // <<< On colle tout ça dans la variable
        
        localStorage.setItem("produits", JSON.stringify(articlesLocalStorage)); // <<< Et on met ça dans le localstorage
        return 1;
      }
    }
    articlesLocalStorage.push(products);
    localStorage.setItem("produits", JSON.stringify(articlesLocalStorage));
  };

  //>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
  function addProduct(article) {
    const isValidArticle = article.quantity > 0 && article.colors != "";
    let basket = JSON.parse(localStorage.getItem("basket")) || [];
   
    if (basket.length == 0 &&  isValidArticle ) {
      basket.push(article)
      localStorage.setItem("basket", JSON.stringify(basket));
    } else {
      const index = basket.findIndex( product => article.id == product.id && article.colors == product.colors );
      if (index != -1)  {
        basket[index].quantity += article.quantity;
        localStorage.setItem("basket",JSON.stringify(basket));
      } else { 
        basket.push(article)
        localStorage.setItem("basket",JSON.stringify(basket));
      }
      
   }
  };